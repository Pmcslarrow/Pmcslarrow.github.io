<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Automated NBA Updates | ExampleSite</title><meta name=keywords content="Python,AWS,Lambda,S3,LLM"><meta name=description content="Overview
This was a personal passion project of mine. It didn&rsquo;t take very long to build (only a day), but it is something that was fun to create and was useful to my everyday life. I later stopped the project because I realized that it went against the robots.txt that I found on a site and didn&rsquo;t mean to go against any regulations. So while it is no longer active, I still had a great time learning more about web scraping and how to automate things through AWS."><meta name=author content="Me"><link rel=canonical href=http://localhost:1313/projects/8_automated_nba/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/projects/8_automated_nba/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="http://localhost:1313/projects/8_automated_nba/"><meta property="og:site_name" content="ExampleSite"><meta property="og:title" content="Automated NBA Updates"><meta property="og:description" content="Overview This was a personal passion project of mine. It didn’t take very long to build (only a day), but it is something that was fun to create and was useful to my everyday life. I later stopped the project because I realized that it went against the robots.txt that I found on a site and didn’t mean to go against any regulations. So while it is no longer active, I still had a great time learning more about web scraping and how to automate things through AWS."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="projects"><meta property="article:published_time" content="2024-05-01T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-01T00:00:00+00:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="AWS"><meta property="article:tag" content="Lambda"><meta property="article:tag" content="S3"><meta property="article:tag" content="LLM"><meta property="og:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Automated NBA Updates"><meta name=twitter:description content="Overview
This was a personal passion project of mine. It didn&rsquo;t take very long to build (only a day), but it is something that was fun to create and was useful to my everyday life. I later stopped the project because I realized that it went against the robots.txt that I found on a site and didn&rsquo;t mean to go against any regulations. So while it is no longer active, I still had a great time learning more about web scraping and how to automate things through AWS."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Projects","item":"http://localhost:1313/projects/"},{"@type":"ListItem","position":2,"name":"Automated NBA Updates","item":"http://localhost:1313/projects/8_automated_nba/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Automated NBA Updates","name":"Automated NBA Updates","description":"Overview This was a personal passion project of mine. It didn\u0026rsquo;t take very long to build (only a day), but it is something that was fun to create and was useful to my everyday life. I later stopped the project because I realized that it went against the robots.txt that I found on a site and didn\u0026rsquo;t mean to go against any regulations. So while it is no longer active, I still had a great time learning more about web scraping and how to automate things through AWS.\n","keywords":["Python","AWS","Lambda","S3","LLM"],"articleBody":"Overview This was a personal passion project of mine. It didn’t take very long to build (only a day), but it is something that was fun to create and was useful to my everyday life. I later stopped the project because I realized that it went against the robots.txt that I found on a site and didn’t mean to go against any regulations. So while it is no longer active, I still had a great time learning more about web scraping and how to automate things through AWS.\nI am a Utah Jazz fan! However, during the school year I had a hard time finding much time to watch as many games as I wanted around the NBA. Therefore, I created this automated email solution that could keep me up-to-date about what is happening around the NBA, standings, and a more tailored description of how the Jazz are doing.\nAs you will see, I leveraged the services on AWS to email myself updates, every morning.\nHow I did it Data collection I wrote a Python script that lives on AWS Lambda that could be spun up whenever I needed to use it.\nThe information that I cared to scrape for my use-cases were:\nStats News Schedule Standings Scores Each of the categories I cared to scrape information from required a date to gather information from. Therefore, I pass in the string format of the previous date to each endpoint to get the correct information.\n# # Date information # today = datetime.now() yesterday = today - timedelta(days=1) yesterday_str = yesterday.strftime('%Y-%m-%d') # # Helper functions per category # scrape_stats(yesterday_str) scrape_news(yesterday_str) scrape_schedule(yesterday_str) scrape_standings(yesterday_str) scrape_scores(yesterday_str) Each helper function works in its own way to correctly scrape the data. For reference, though, I include an example of how I used BeautifulSoup to scrape the a site for stats:\ndef scrape_standings(yesterday_str): url = ### response = requests.get(url) # # The structure of the data that I am saving # @dataclass class Standing: conference: str rank: int team: str win_loss: str pct: float streak: str standings = [] if response.status_code == 200: content = response.text soup = BeautifulSoup(content, 'html.parser') conferences_tables = soup.find_all('div', class_='table-wrapper-container group-section') # # Storing relevant information in local variables # if conferences_tables: western_conference_table = conferences_tables[0] eastern_conference_table = conferences_tables[1] western_conference_standings = western_conference_table.find_all('tr') eastern_conference_standings = eastern_conference_table.find_all('tr') # # Going through Western conference tables # for i, team_row in enumerate(western_conference_standings): if i == 0: continue rank_td = team_row.find('td', class_='cell-rank ffn-11') rank = int(rank_td.get_text(strip=True)) if rank_td else None team_td = team_row.find('a', class_='table-entity-name ff-ffc') team_name = team_td.get_text(strip=True) if team_td else None win_loss_td = team_row.find_all('td', class_='cell-record ff-h') win_loss = win_loss_td[0].get_text(strip=True) if win_loss_td else None pct_td = team_row.find_all('td', class_='cell-number ff-h') pct = float(pct_td[0].get_text(strip=True)) if pct_td else None streak_td = team_row.find('td', class_='cell-text ff-h') streak = streak_td.get_text(strip=True) if streak_td else None if rank and team_name and win_loss and pct and streak: standings.append(Standing('West', rank, team_name, win_loss, pct, streak)) # # Going through Eastern conference tables # for i, team_row in enumerate(eastern_conference_standings): if i == 0: continue rank_td = team_row.find('td', class_='cell-rank ffn-11') rank = int(rank_td.get_text(strip=True)) if rank_td else None team_td = team_row.find('a', class_='table-entity-name ff-ffc') team_name = team_td.get_text(strip=True) if team_td else None win_loss_td = team_row.find_all('td', class_='cell-record ff-h') win_loss = win_loss_td[0].get_text(strip=True) if win_loss_td else None pct_td = team_row.find_all('td', class_='cell-number ff-h') pct = float(pct_td[0].get_text(strip=True)) if pct_td else None streak_td = team_row.find('td', class_='cell-text ff-h') streak = streak_td.get_text(strip=True) if streak_td else None if rank and team_name and win_loss and pct and streak: standings.append(Standing('East', rank, team_name, win_loss, pct, streak)) # # Save Jazz info to local Lambda memory /tmp # try: if standings: df = pd.DataFrame(standings) jazz_standing = df[df['team'] == 'Jazz'] jazz_standing.to_csv(f'/tmp/nba-data/{yesterday_str}/standing.txt', sep='\\t', index=False) else: raise ValueError except Exception as e: print(\"ERROR: \", e) Using an LLM to create a summary for me After I collected all of the relevant information that I wanted, I pulled all of the information into a new lambda function from the local /tmp memory.\nThis lambda function then utilized langchain’s ChatOpenAI method to help me connect to the correct data loaders and functions I needed for my task.\nThe result created a message that summarized yesterday’s nba games in a single paragraph and that emphasized the Jazz, for my own interest.\n# ... # ... # ... # # Loading in all of the data collected # loader = DirectoryLoader('/tmp/', glob='*.txt', loader_cls=TextLoader) docs = loader.load() docs_content = \"\\n\\n\".join(doc.page_content for doc in docs) llm = ChatOpenAI(model='gpt-4o-mini') # # Creating a good prompt that explains my goal # prompt = f\"\"\" You are an NBA writer. Write a three-paragraph NBA update based only on the information provided. Use things from the I give you, like news articles to summarize key stories, and incorporate scores to highlight recent games. Keep in mind that I am a Jazz fan, so I care more about Jazz info when they do play. Ensure your summary is concise and accurate. {docs_content} Your response: \"\"\" response = llm.invoke(prompt) paragraph_summary = response.content # Getting relevant info standing_content = generate_content('/tmp/standing.txt') upcoming_content = generate_content('/tmp/upcoming.txt') scores_content = generate_content('/tmp/scores.txt') stats_content = generate_content('/tmp/stats.txt') ses = boto3.client('ses', region_name='us-east-2') subject = \"Daily NBA Update!\" # # Sending an email to myself in a format that I created with HTML and CSS # html_body = f\"\"\" Jazz Update {standing_content} {upcoming_content} General Update {paragraph_summary} {scores_content} \"\"\" text_body = \"Hello from AWS Lambda! This email was sent using Amazon SES with a plain text body.\" try: response = ses.send_email( Source='pmcslarrow@icloud.com', Destination={ 'ToAddresses': ['pmcslarrow@icloud.com'], }, Message={ 'Subject': { 'Data': subject }, 'Body': { 'Text': { 'Data': text_body }, 'Html': { 'Data': html_body } } } ) except Exception as e: print(\"Failed to send email...\", e) Final Result ","wordCount":"991","inLanguage":"en","image":"http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-05-01T00:00:00Z","dateModified":"2024-05-01T00:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/projects/8_automated_nba/"},"publisher":{"@type":"Organization","name":"ExampleSite","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Home (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/about/ title=about><span>about</span></a></li><li><a href=http://localhost:1313/projects/ title=projects><span>projects</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/projects/>Projects</a></div><h1 class="post-title entry-hint-parent">Automated NBA Updates</h1></header><div class=post-content><h2 id=overview>Overview<a hidden class=anchor aria-hidden=true href=#overview>#</a></h2><p>This was a personal passion project of mine. It didn&rsquo;t take very long to build (only a day), but it is something that was fun to create and was useful to my everyday life. I later stopped the project because I realized that it went against the robots.txt that I found on a site and didn&rsquo;t mean to go against any regulations. So while it is no longer active, I still had a great time learning more about web scraping and how to automate things through AWS.</p><p>I am a Utah Jazz fan! However, during the school year I had a hard time finding much time to watch as many games as I wanted around the NBA. Therefore, I created this automated email solution that could keep me up-to-date about what is happening around the NBA, standings, and a more tailored description of how the Jazz are doing.</p><p>As you will see, I leveraged the services on AWS to email myself updates, every morning.</p><h2 id=how-i-did-it>How I did it<a hidden class=anchor aria-hidden=true href=#how-i-did-it>#</a></h2><h4 id=data-collection>Data collection<a hidden class=anchor aria-hidden=true href=#data-collection>#</a></h4><p>I wrote a Python script that lives on AWS Lambda that could be spun up whenever I needed to use it.</p><p>The information that I cared to scrape for my use-cases were:</p><ol><li>Stats</li><li>News</li><li>Schedule</li><li>Standings</li><li>Scores</li></ol><p>Each of the categories I cared to scrape information from required a date to gather information from. Therefore, I pass in the string format of the previous date to each endpoint to get the correct information.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Date information</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=n>today</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>yesterday</span> <span class=o>=</span> <span class=n>today</span> <span class=o>-</span> <span class=n>timedelta</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>yesterday_str</span> <span class=o>=</span> <span class=n>yesterday</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%Y-%m-</span><span class=si>%d</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Helper functions per category</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=n>scrape_stats</span><span class=p>(</span><span class=n>yesterday_str</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>scrape_news</span><span class=p>(</span><span class=n>yesterday_str</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>scrape_schedule</span><span class=p>(</span><span class=n>yesterday_str</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>scrape_standings</span><span class=p>(</span><span class=n>yesterday_str</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>scrape_scores</span><span class=p>(</span><span class=n>yesterday_str</span><span class=p>)</span>
</span></span></code></pre></div><p>Each helper function works in its own way to correctly scrape the data. For reference, though, I include an example of how I used BeautifulSoup to scrape the a site for stats:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>scrape_standings</span><span class=p>(</span><span class=n>yesterday_str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>url</span> <span class=o>=</span> <span class=c1>###</span>
</span></span><span class=line><span class=cl>    <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>#</span>
</span></span><span class=line><span class=cl>    <span class=c1># The structure of the data that I am saving</span>
</span></span><span class=line><span class=cl>    <span class=c1>#</span>
</span></span><span class=line><span class=cl>    <span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Standing</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>conference</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>        <span class=n>rank</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>        <span class=n>team</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>        <span class=n>win_loss</span><span class=p>:</span> <span class=nb>str</span> 
</span></span><span class=line><span class=cl>        <span class=n>pct</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>        <span class=n>streak</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>standings</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>content</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>        <span class=n>soup</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>content</span><span class=p>,</span> <span class=s1>&#39;html.parser&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>conferences_tables</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s1>&#39;div&#39;</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s1>&#39;table-wrapper-container group-section&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=c1>#</span>
</span></span><span class=line><span class=cl>    <span class=c1># Storing relevant information in local variables</span>
</span></span><span class=line><span class=cl>    <span class=c1>#</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>conferences_tables</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>western_conference_table</span> <span class=o>=</span> <span class=n>conferences_tables</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>eastern_conference_table</span> <span class=o>=</span> <span class=n>conferences_tables</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>western_conference_standings</span> <span class=o>=</span> <span class=n>western_conference_table</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s1>&#39;tr&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>eastern_conference_standings</span> <span class=o>=</span> <span class=n>eastern_conference_table</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s1>&#39;tr&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>#</span>
</span></span><span class=line><span class=cl>    <span class=c1># Going through Western conference tables</span>
</span></span><span class=line><span class=cl>    <span class=c1>#</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>team_row</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>western_conference_standings</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span> 
</span></span><span class=line><span class=cl>                <span class=k>continue</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>rank_td</span> <span class=o>=</span> <span class=n>team_row</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;td&#39;</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s1>&#39;cell-rank ffn-11&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>rank</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>rank_td</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span> <span class=k>if</span> <span class=n>rank_td</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>team_td</span> <span class=o>=</span> <span class=n>team_row</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s1>&#39;table-entity-name ff-ffc&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>team_name</span> <span class=o>=</span> <span class=n>team_td</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>if</span> <span class=n>team_td</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>win_loss_td</span> <span class=o>=</span> <span class=n>team_row</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s1>&#39;td&#39;</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s1>&#39;cell-record ff-h&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>win_loss</span> <span class=o>=</span> <span class=n>win_loss_td</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>if</span> <span class=n>win_loss_td</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>pct_td</span> <span class=o>=</span> <span class=n>team_row</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s1>&#39;td&#39;</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s1>&#39;cell-number ff-h&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>pct</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>pct_td</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span> <span class=k>if</span> <span class=n>pct_td</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>streak_td</span> <span class=o>=</span> <span class=n>team_row</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;td&#39;</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s1>&#39;cell-text ff-h&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>streak</span> <span class=o>=</span> <span class=n>streak_td</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>if</span> <span class=n>streak_td</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>rank</span> <span class=ow>and</span> <span class=n>team_name</span> <span class=ow>and</span> <span class=n>win_loss</span> <span class=ow>and</span> <span class=n>pct</span> <span class=ow>and</span> <span class=n>streak</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>standings</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Standing</span><span class=p>(</span><span class=s1>&#39;West&#39;</span><span class=p>,</span> <span class=n>rank</span><span class=p>,</span> <span class=n>team_name</span><span class=p>,</span> <span class=n>win_loss</span><span class=p>,</span> <span class=n>pct</span><span class=p>,</span> <span class=n>streak</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># </span>
</span></span><span class=line><span class=cl>        <span class=c1># Going through Eastern conference tables</span>
</span></span><span class=line><span class=cl>        <span class=c1>#</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>team_row</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>eastern_conference_standings</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>  
</span></span><span class=line><span class=cl>                    <span class=k>continue</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>rank_td</span> <span class=o>=</span> <span class=n>team_row</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;td&#39;</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s1>&#39;cell-rank ffn-11&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>rank</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>rank_td</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span> <span class=k>if</span> <span class=n>rank_td</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>team_td</span> <span class=o>=</span> <span class=n>team_row</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s1>&#39;table-entity-name ff-ffc&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>team_name</span> <span class=o>=</span> <span class=n>team_td</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>if</span> <span class=n>team_td</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>win_loss_td</span> <span class=o>=</span> <span class=n>team_row</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s1>&#39;td&#39;</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s1>&#39;cell-record ff-h&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>win_loss</span> <span class=o>=</span> <span class=n>win_loss_td</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>if</span> <span class=n>win_loss_td</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>pct_td</span> <span class=o>=</span> <span class=n>team_row</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s1>&#39;td&#39;</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s1>&#39;cell-number ff-h&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>pct</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>pct_td</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span> <span class=k>if</span> <span class=n>pct_td</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>streak_td</span> <span class=o>=</span> <span class=n>team_row</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;td&#39;</span><span class=p>,</span> <span class=n>class_</span><span class=o>=</span><span class=s1>&#39;cell-text ff-h&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>streak</span> <span class=o>=</span> <span class=n>streak_td</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>if</span> <span class=n>streak_td</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>rank</span> <span class=ow>and</span> <span class=n>team_name</span> <span class=ow>and</span> <span class=n>win_loss</span> <span class=ow>and</span> <span class=n>pct</span> <span class=ow>and</span> <span class=n>streak</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>standings</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Standing</span><span class=p>(</span><span class=s1>&#39;East&#39;</span><span class=p>,</span> <span class=n>rank</span><span class=p>,</span> <span class=n>team_name</span><span class=p>,</span> <span class=n>win_loss</span><span class=p>,</span> <span class=n>pct</span><span class=p>,</span> <span class=n>streak</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>#</span>
</span></span><span class=line><span class=cl>        <span class=c1># Save Jazz info to local Lambda memory /tmp</span>
</span></span><span class=line><span class=cl>        <span class=c1>#</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>standings</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>standings</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>jazz_standing</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;team&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;Jazz&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=n>jazz_standing</span><span class=o>.</span><span class=n>to_csv</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;/tmp/nba-data/</span><span class=si>{</span><span class=n>yesterday_str</span><span class=si>}</span><span class=s1>/standing.txt&#39;</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=s1>&#39;</span><span class=se>\t</span><span class=s1>&#39;</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>raise</span> <span class=ne>ValueError</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;ERROR: &#34;</span><span class=p>,</span> <span class=n>e</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=using-an-llm-to-create-a-summary-for-me>Using an LLM to create a summary for me<a hidden class=anchor aria-hidden=true href=#using-an-llm-to-create-a-summary-for-me>#</a></h4><p>After I collected all of the relevant information that I wanted, I pulled all of the information into a new lambda function from the local /tmp memory.</p><p>This lambda function then utilized langchain&rsquo;s ChatOpenAI
method to help me connect to the correct data loaders and functions I needed for my task.</p><p>The result created a message that summarized yesterday&rsquo;s nba games in a single paragraph and that emphasized the Jazz, for my own interest.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ...</span>
</span></span><span class=line><span class=cl><span class=c1># ...</span>
</span></span><span class=line><span class=cl><span class=c1># ...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Loading in all of the data collected</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl> <span class=n>loader</span> <span class=o>=</span> <span class=n>DirectoryLoader</span><span class=p>(</span><span class=s1>&#39;/tmp/&#39;</span><span class=p>,</span> <span class=n>glob</span><span class=o>=</span><span class=s1>&#39;*.txt&#39;</span><span class=p>,</span> <span class=n>loader_cls</span><span class=o>=</span><span class=n>TextLoader</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>docs</span> <span class=o>=</span> <span class=n>loader</span><span class=o>.</span><span class=n>load</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>docs_content</span> <span class=o>=</span> <span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>doc</span><span class=o>.</span><span class=n>page_content</span> <span class=k>for</span> <span class=n>doc</span> <span class=ow>in</span> <span class=n>docs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>llm</span> <span class=o>=</span> <span class=n>ChatOpenAI</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s1>&#39;gpt-4o-mini&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Creating a good prompt that explains my goal </span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl>    <span class=n>prompt</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    You are an NBA writer. 
</span></span></span><span class=line><span class=cl><span class=s2>    Write a three-paragraph NBA update based only on the information provided. 
</span></span></span><span class=line><span class=cl><span class=s2>    Use things from the &lt;context&gt; I give you, like news articles to summarize key stories, 
</span></span></span><span class=line><span class=cl><span class=s2>    and incorporate scores to highlight recent games.
</span></span></span><span class=line><span class=cl><span class=s2>    Keep in mind that I am a Jazz fan, so I care more about Jazz info when they do play. 
</span></span></span><span class=line><span class=cl><span class=s2>    Ensure your summary is concise and accurate. 
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    &lt;context&gt;
</span></span></span><span class=line><span class=cl><span class=s2>    </span><span class=si>{</span><span class=n>docs_content</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    Your response:
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>response</span> <span class=o>=</span> <span class=n>llm</span><span class=o>.</span><span class=n>invoke</span><span class=p>(</span><span class=n>prompt</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>paragraph_summary</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>content</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Getting relevant info</span>
</span></span><span class=line><span class=cl>    <span class=n>standing_content</span> <span class=o>=</span> <span class=n>generate_content</span><span class=p>(</span><span class=s1>&#39;/tmp/standing.txt&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>upcoming_content</span> <span class=o>=</span> <span class=n>generate_content</span><span class=p>(</span><span class=s1>&#39;/tmp/upcoming.txt&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>scores_content</span> <span class=o>=</span> <span class=n>generate_content</span><span class=p>(</span><span class=s1>&#39;/tmp/scores.txt&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>stats_content</span> <span class=o>=</span> <span class=n>generate_content</span><span class=p>(</span><span class=s1>&#39;/tmp/stats.txt&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>ses</span> <span class=o>=</span> <span class=n>boto3</span><span class=o>.</span><span class=n>client</span><span class=p>(</span><span class=s1>&#39;ses&#39;</span><span class=p>,</span> <span class=n>region_name</span><span class=o>=</span><span class=s1>&#39;us-east-2&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>subject</span> <span class=o>=</span> <span class=s2>&#34;Daily NBA Update!&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>#</span>
</span></span><span class=line><span class=cl>    <span class=c1># Sending an email to myself in a format that I created with HTML and CSS</span>
</span></span><span class=line><span class=cl>    <span class=c1># </span>
</span></span><span class=line><span class=cl>    <span class=n>html_body</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    &lt;html&gt;
</span></span></span><span class=line><span class=cl><span class=s2>    &lt;head&gt;
</span></span></span><span class=line><span class=cl><span class=s2>    &lt;style&gt;
</span></span></span><span class=line><span class=cl><span class=s2>        table </span><span class=se>{{</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>            border-collapse: collapse;
</span></span></span><span class=line><span class=cl><span class=s2>            margin: 0 auto;
</span></span></span><span class=line><span class=cl><span class=s2>            width: 80%;
</span></span></span><span class=line><span class=cl><span class=s2>        </span><span class=se>}}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        th, td </span><span class=se>{{</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>            border: 1px solid #ddd;
</span></span></span><span class=line><span class=cl><span class=s2>            padding: 8px;
</span></span></span><span class=line><span class=cl><span class=s2>            text-align: center;
</span></span></span><span class=line><span class=cl><span class=s2>        </span><span class=se>}}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        th </span><span class=se>{{</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>            background-color: #f4f4f4;
</span></span></span><span class=line><span class=cl><span class=s2>            font-weight: bold;
</span></span></span><span class=line><span class=cl><span class=s2>        </span><span class=se>}}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        tr:nth-child(even) </span><span class=se>{{</span><span class=s2> background-color: #f9f9f9; </span><span class=se>}}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        tr:hover </span><span class=se>{{</span><span class=s2> background-color: #f1f1f1; </span><span class=se>}}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    &lt;/style&gt;
</span></span></span><span class=line><span class=cl><span class=s2>    &lt;/head&gt;
</span></span></span><span class=line><span class=cl><span class=s2>    &lt;body&gt;
</span></span></span><span class=line><span class=cl><span class=s2>       &lt;h2&gt;Jazz Update&lt;/h2&gt;
</span></span></span><span class=line><span class=cl><span class=s2>        &lt;div style=&#39;text-align: center;&#39;&gt;
</span></span></span><span class=line><span class=cl><span class=s2>            </span><span class=si>{</span><span class=n>standing_content</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s2>        &lt;br/&gt;
</span></span></span><span class=line><span class=cl><span class=s2>        &lt;div style=&#39;text-align: center;&#39;&gt;
</span></span></span><span class=line><span class=cl><span class=s2>            </span><span class=si>{</span><span class=n>upcoming_content</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s2>        &lt;br /&gt;
</span></span></span><span class=line><span class=cl><span class=s2>        &lt;h2&gt;General Update&lt;/h2&gt;
</span></span></span><span class=line><span class=cl><span class=s2>        &lt;p&gt;
</span></span></span><span class=line><span class=cl><span class=s2>            </span><span class=si>{</span><span class=n>paragraph_summary</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        &lt;/p&gt;
</span></span></span><span class=line><span class=cl><span class=s2>        &lt;br /&gt;
</span></span></span><span class=line><span class=cl><span class=s2>        &lt;div style=&#39;text-align: center;&#39;&gt;
</span></span></span><span class=line><span class=cl><span class=s2>            </span><span class=si>{</span><span class=n>scores_content</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    &lt;/body&gt;
</span></span></span><span class=line><span class=cl><span class=s2>    &lt;/html&gt;
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>text_body</span> <span class=o>=</span> <span class=s2>&#34;Hello from AWS Lambda! This email was sent using Amazon SES with a plain text body.&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=n>ses</span><span class=o>.</span><span class=n>send_email</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>Source</span><span class=o>=</span><span class=s1>&#39;pmcslarrow@icloud.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>Destination</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;ToAddresses&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;pmcslarrow@icloud.com&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=n>Message</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Subject&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;Data&#39;</span><span class=p>:</span> <span class=n>subject</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Body&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;Text&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;Data&#39;</span><span class=p>:</span> <span class=n>text_body</span>
</span></span><span class=line><span class=cl>                    <span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;Html&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;Data&#39;</span><span class=p>:</span> <span class=n>html_body</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Failed to send email...&#34;</span><span class=p>,</span> <span class=n>e</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=final-result>Final Result<a hidden class=anchor aria-hidden=true href=#final-result>#</a></h2><div><img src=/images/nba/nba.png alt="Nba automated email result" style="display:block;margin:0 auto"></div></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/python/>Python</a></li><li><a href=http://localhost:1313/tags/aws/>AWS</a></li><li><a href=http://localhost:1313/tags/lambda/>Lambda</a></li><li><a href=http://localhost:1313/tags/s3/>S3</a></li><li><a href=http://localhost:1313/tags/llm/>LLM</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>ExampleSite</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>