<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>HoopEasy | McSlarrowPortfolio</title><meta name=keywords content="React,Javascript,Node.js,Docker,SQL,Railway,Fullstack"><meta name=description content="Github Link

Original draft: https://github.com/Pmcslarrow/hoop-easy
Refactor: https://github.com/Pmcslarrow/hoop-easy-material-ui/

Overview
The document below is my README file within my GitHub repo for the refactoring of HoopEasy. The project is an application designed to help people easily find pickup basketball games near them, while also using an ELO system to track global rankings. Although it was never fully marketed or widely adopted, this was my first large-scale full-stack project completed during undergrad. It was a rewarding experience that brought together many of the skills I had learned."><meta name=author content="Me"><link rel=canonical href=http://localhost:1313/projects/10_hoopeasy/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/projects/10_hoopeasy/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="http://localhost:1313/projects/10_hoopeasy/"><meta property="og:site_name" content="McSlarrowPortfolio"><meta property="og:title" content="HoopEasy"><meta property="og:description" content="Github Link Original draft: https://github.com/Pmcslarrow/hoop-easy Refactor: https://github.com/Pmcslarrow/hoop-easy-material-ui/ Overview The document below is my README file within my GitHub repo for the refactoring of HoopEasy. The project is an application designed to help people easily find pickup basketball games near them, while also using an ELO system to track global rankings. Although it was never fully marketed or widely adopted, this was my first large-scale full-stack project completed during undergrad. It was a rewarding experience that brought together many of the skills I had learned."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="projects"><meta property="article:published_time" content="2024-05-01T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-01T00:00:00+00:00"><meta property="article:tag" content="React"><meta property="article:tag" content="Javascript"><meta property="article:tag" content="Node.js"><meta property="article:tag" content="Docker"><meta property="article:tag" content="SQL"><meta property="article:tag" content="Railway"><meta property="og:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="HoopEasy"><meta name=twitter:description content="Github Link

Original draft: https://github.com/Pmcslarrow/hoop-easy
Refactor: https://github.com/Pmcslarrow/hoop-easy-material-ui/

Overview
The document below is my README file within my GitHub repo for the refactoring of HoopEasy. The project is an application designed to help people easily find pickup basketball games near them, while also using an ELO system to track global rankings. Although it was never fully marketed or widely adopted, this was my first large-scale full-stack project completed during undergrad. It was a rewarding experience that brought together many of the skills I had learned."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Projects","item":"http://localhost:1313/projects/"},{"@type":"ListItem","position":2,"name":"HoopEasy","item":"http://localhost:1313/projects/10_hoopeasy/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"HoopEasy","name":"HoopEasy","description":"Github Link Original draft: https://github.com/Pmcslarrow/hoop-easy Refactor: https://github.com/Pmcslarrow/hoop-easy-material-ui/ Overview The document below is my README file within my GitHub repo for the refactoring of HoopEasy. The project is an application designed to help people easily find pickup basketball games near them, while also using an ELO system to track global rankings. Although it was never fully marketed or widely adopted, this was my first large-scale full-stack project completed during undergrad. It was a rewarding experience that brought together many of the skills I had learned.\n","keywords":["React","Javascript","Node.js","Docker","SQL","Railway","Fullstack"],"articleBody":"Github Link Original draft: https://github.com/Pmcslarrow/hoop-easy Refactor: https://github.com/Pmcslarrow/hoop-easy-material-ui/ Overview The document below is my README file within my GitHub repo for the refactoring of HoopEasy. The project is an application designed to help people easily find pickup basketball games near them, while also using an ELO system to track global rankings. Although it was never fully marketed or widely adopted, this was my first large-scale full-stack project completed during undergrad. It was a rewarding experience that brought together many of the skills I had learned.\nBelow you will find the first draft of HoopEasy (also found in a demo at this link).\nThe GitHub repository implements optimizations to enhance memory efficiency through strategic use of React’s useCallback hook and improves the overall user interface for better usability.\nIntroduction HoopEasy is an application built for the basketball community to help find pickup games near you, and in the process, climb the global rank ladder to the top.\nIn roughly three months, I worked with two students in the MBA program at Willamette University on a new venture, HoopEasy. While HoopEasy is hosted online and fully functioning, I feel a sense of responsibility as a developer to focus on the quality of the product. With this in mind, I’ve concluded that the overhead memory of the application is too high, primarily due to the overuse of JSX and poorly utilized React hooks.\nReflecting on the project, I am extremely proud to have created a full-stack application from scratch without relying on someone else’s YouTube tutorial. However, it’s clear that the efficiency came with some consequences. My new goal is to recreate HoopEasy behind the scenes while the MBA students focus on establishing a user base. In doing so, I will learn from my mistakes and aim to use UI libraries, as well as limit unnecessary re-renders.\nDespite feeling empowered to use raw JSX and CSS to develop the entire application in the old version, the reality is that there are UI libraries available that I can leverage to create a similar application with less overhead memory. I will be using Material UI’s (MUI) library to recreate HoopEasy in a way that is still reactive, easier for users to navigate, and has lower overhead memory.\nI am pleased to report that in only 2-3 weeks, I successfully recreated almost the same concept as in the old version, but reimagined to enhance user experience and alleviate the memory usage issue that initiated this journey. The memory has officially been reduced from around 500 MB on average to between 57 MB and 103 MB.\nTheming To begin, I had to get a good theme created that wraps every route to the application (that we have so far). In doing so, we leverage MUI’s theming abilities to create the color, typography, and more that hold the overall theme structure together.\nconst theme = createTheme({ palette: { primary: { main: '#1d3557', contrastText: '#fff', }, secondary: { main: '#1d3557', darkBlue: '#457b9d', lightBlue: '#a8dadc', lightRed: '#ee747e', red: '#e63946' }, }, typography: { fontFamily: 'Quicksand', fontWeightLight: 400, fontWeightRegular: 500, fontWeightMedium: 600, fontWeightBold: 700 }, spacing: 10, }) Authentication Looking back at the code I wrote early on in the authentication process, it was confusing. I was writing my javascript in a C-like format where functions return nullish values when they fail, and otherwise return back the data. Saying this outloud I realized that Javascript has functionality for this out of box that could make the code more precise, and in which handles errors well — Promises. This was fixed for both login and createAccount. We will draw examples from creating a new user.\nOld handling (no promises) const handleSubmit = async (e) =\u003e { e.preventDefault(); if (isEmpty()) { return } if ( passwordsDontMatch() ) { return } try { const userCredential = await createUserWithEmailAndPassword(auth, formData.email, formData.password); addNewUser(); await sendEmailVerification(userCredential.user); setMessage(\"Please verify your email.\"); setError(true); setTimeout(() =\u003e { navigate(\"/login\"); }, 5000); } catch (err) { handleError(setError, setMessage, err); } }; New handling (promises) async function createNewUser(first, last, username, email, password) { return new Promise((resolve, reject) =\u003e { if (isEmpty([first, last, username, email, password])) { reject(new Error(\"Empty fields\")) } createUserWithEmailAndPassword(auth, email, password) .then((userCredentials) =\u003e { addNewUserToDatabase(first, last, username, email, password) resolve(userCredentials) sendEmailVerification(userCredentials.user) }) .catch((err) =\u003e { reject(new Error(\"Failed to create new user\")) }) const handleSubmit = async (event) =\u003e { event.preventDefault(); const data = new FormData(event.currentTarget); await createNewUser( data.get('firstName'), data.get('lastName'), data.get('username'), data.get('email'), data.get('password'), ) .then(() =\u003e { navigate('/') }).catch((res) =\u003e { console.log(res) }) }; New vs. Old Authentication UI Comparison Homepage While the homepage which holds all the core functionality is simple, I believe that we can improve it. The homepage has three key components: How to play, My Games, and History. The page was a more inefficient version of functionality to go through the steps of creating, finding, playing, and submitting game results.\nInstead of having three components that take up 100% of the viewport height each, I am going to give the page a dashboard sort of feel. A central hub where you can do the same things as the old version of the app, but more condensed. We will start with the general statistics components and what was changed in order to drive efficiency.\nGeneral Statistics The general statistics component is used as the replacement for the rankings page that existed on the original HoopEasy app. The new version uses MaterialUI’s built in Pagination system to make the component more compact and elegant at once. At the top left of the entire wrapped component, the overall rating is shown, rather than staying sticky at the bottom left of the user’s screen at all times. One area where I focused on improvements in my code was in the overcalculation of certain parameters (getting user ID, getting overall rating, calculating ranks in line…). In the old version of the application, I would go through the process of fetching the current user ID and then plugging this user ID into another fetch call which would get the users overall rating… This was a waste of resources. Instead, I knew that the overall rating was attached to each user profile, and we are using useContext at the top level of the application to hold the user’s information and then pass props with it later on in the homepage. Given this information, I instead used useEffect and passed in the [user] as one of the dependencies to refresh all of the data for, so that when there was a reason for the user’s information to update on the page (say the user won a game and their overall rating increased), then the useEffect would re-fetch the updated user information this way once instead of multiple times. The same logic I just described is the backbone of the improvement of code for nearly each component. Instead of unnecessary re-rendering from the old code, I managed to improve these unnecessary calls with the use of native React hooks. The other thing that I noticed was using wasted overhead memory, was the location in which each element was called. In the old version, I had each individual component become a sibling or a child of one parent component. This meant that whenever the most important parent component re-rendered, it automatically would re-render the components down the DOM tree which was not necessary.\nOld Code You can’t see it in one copy, however, the currentUserID was calculated in the parent component useEffect, and forced a re-render of the PlayerOverallRating without regards to when it should actually re-render. We also made a point earlier that we would move towards using more error handling instances in the code. And rather than holding the user, and the userID separately, we made sure to use one User which we could draw our information from.\nconst PlayerOverallRating = ({currentUserID, refreshToken}) =\u003e { const [overallRating, setOverallRating] = useState(null) useEffect(() =\u003e { const getOverallRating = async () =\u003e { const response = await axios.get(`https://hoop-easy-production.up.railway.app/api/getUserWithID?userID=${currentUserID}`) setOverallRating(parseFloat(response.data.overall).toFixed(2)) } getOverallRating() }, [refreshToken]) New Code The new code only re-renders on a manaul refresh. This seems very similar to the old version, but the major difference is that it does not force re-renders anymore for multiple other components when this happens, it only manually adjust a select handful.\nuseEffect(() =\u003e { getUser(user?.email) }, [refresh]) /* Inside App.js */ const getUser = React.useCallback(async (email) =\u003e { try { const response = await axios.get(`https://hoop-easy-production.up.railway.app/api/getUser?email=${email}`); setCurrentUser(response.data); } catch(err) { console.error(err); } }, []); My Games The updated version of the My Games component uses multiple different ideas in order to drive efficiency with regards to memory, and efficiency in how it will make it easier for the user experience. Two new components exist at the top to give the user an easy way to view how many games they have coming up, or that they have past (probably meaning that they played this game and need to submit scores and verify). Rather than having to use the slider from the older version to find your games, we make sure to re-use the same component used for the General Statistics component, with different data and headers that are passed in. In doing so, we remove any wasted overhead memory that didn’t need to be used. Another way that we reused components was with the Dialog modal we will talk about directly after this section.\nWith regards to the user experience, we made sure to let the user hover over elements of this list (which become highlighted light blue) and in which they can click, to open up the form for submitting game information. This modal is one of the most important components in the application, because we re-use it in three key circumstances to reduce any waste in our code; these components include the ScoreInputComponent, VerifyScoreComponent, and CreateGameForm, all used from this one component.\nSubmitting Scores When clicked, the user is able to submit scores and captains of the game in a very familiar way to the previous application, except use a single form rather than a three step drawer that used up lots of memory in the previous app: Verifying Scores As much as we loved the design of the old card in this stage, we needed to remove the @vis.gl/react-google-maps API as it was causing too long of renders shown from the React Profiler built into Google Chrome to analyze efficiency in our components. While we ended up using vis.gl for the large map discussed later on, it was wasted overhead memory having multiple list view items containing their own map components each, which would all have too long of re-renders everytime the user adjusted data, or their screen size on the old version. Removing it only made sense.\nUsing the same table and modal to enforce familiarity in the application, we implement a very similar logic system from the old to the new version for this step, except that we cannot show Accept and Deny inside the table so we use the Dialog modal again: When the second captain verifies the game, it goes through the process of using our manual refresh mentioned earlier, which will then re-render the three main components of the application because it is the instance that requires a change in every component on the page, which is expected.\nUnder the Hood We have discussed the high level user understanding of what is expected from each component. Now it is appropriate to discuss a few of the code examples that were adjusted under the hood, in order to drive efficiency in the refactor of HoopEasy.\nThe first thing that we must describe is how we actually re-use the two same components (General Statistics and My Games) at the top of the page, with different data. We accomplish this by using a single wrapper that takes in some props as a parameter with the data that should be filled in accordingly. It takes in GridAttributes, which contain the title of the page, and the data that should go into the two blue boxes at the top, and then the data to fill the table.\n// GridAttributes which are passed in for My Games const AttRight = { title: 'My Games', blockOneTitle: 'Upcoming', blockOneValue: upcomingGamesCount, blockTwoTitle: 'Past', blockTwoValue: gamesPlayedCount, component: \u003cCustomPaginationActionsTable rows={myGames ?? [{name: 'empty', overall: 'empty', rank: 'empty', gamesPlayed: 'empty'}]} columnNames={myGamesCols} isMyGames={true} user={user} setRefresh={setRefresh} refresh={refresh}/\u003e, } /** * The SmallGrid is used for the two tables on the homepage. It lets you pass in data to customize the table, and have highlight attributes at the top * @param {string} title * @param {object} GridAttributes - { title, blockOneTitle, blockOneValue, blockTwoTitle, blockTwoValue, component } */ function SmallGrid({GridAttributes}) { return ( \u003cBox sx={{ flexGrow: 1}}\u003e \u003cTypography variant=\"h5\"\u003e{GridAttributes.title}\u003c/Typography\u003e \u003cbr /\u003e \u003cGrid container spacing={1}\u003e \u003cGrid item xs={4}\u003e \u003cItem\u003e \u003cTypography variant=\"body2\"\u003e{GridAttributes.blockOneTitle}\u003c/Typography\u003e {GridAttributes.blockOneValue} \u003c/Item\u003e \u003c/Grid\u003e \u003cGrid item xs={4}\u003e \u003cItem\u003e \u003cTypography variant=\"body2\"\u003e{GridAttributes.blockTwoTitle}\u003c/Typography\u003e {GridAttributes.blockTwoValue} \u003c/Item\u003e \u003c/Grid\u003e \u003cGrid item xs={12}\u003e {GridAttributes.component} \u003c/Grid\u003e \u003c/Grid\u003e \u003c/Box\u003e ) } Since we have used TablePagination.jsx as the reusable component for the top two parent components, the logic that drives what happens in the My Games section works a little differently. Inside the Table, we use inline logic that tells the program that IF we pass in the MyGames component in, allow the user to click the rows, and if they do click the rows, handleRowClick as seen below. When handling the row clicks, we must check what type of game we are looking at to choose which component that the dialog modal should show. If the game is a ‘confirmed’ game, then we know the user still has to submit the scores of the game, so we set the selected component to this and open the dialog. If the game is a ‘verification’ game, then we know the game stats were submitted, and we need to show the logic for verifying a game.\nconst handleRowClick = (game) =\u003e { setSelectedGame(game) if (game.col1 === 'confirmed') { setSelectedComponent(\u003cSubmitGameData user={user} game={game} refresh={refresh} setRefresh={setRefresh} handleClose={handleClose}/\u003e) setDialogOpen(true) } if (game.col1 === 'verification') { setSelectedComponent(\u003cVerifyGame user={user} game={game} refresh={refresh} setRefresh={setRefresh} handleClose={handleClose}re/\u003e) setDialogOpen(true) } } The old version of this similar logic is shown below. It was too confusing for anyone passing by the code to understand. It looks clean, however, I personally apologize for anyone that may have had to look at this because in some cases it returns components, and then it also returns a function which returns a component and more under the hood. It was not simplified enough.\nconst renderLowerCardSection = () =\u003e { if (type === 'pending') { return \u003cWaitingForGameAcceptance /\u003e } if (type === 'confirmed') { return \u003cScoreInputComponent props={{currentCard, currentUserID, refreshToken, setRefreshToken}} /\u003e } if (type === 'verification') { return handleVerificationStage() } }; Nearly every single line of code was rewritten, so for the purpose of this document, it would not be appropriate to explain every piece of logic in the application, but only a subset of changes that could be useful in seeing how it was improved.\nFind a Game Another component that was completely redesigned was finding a game. I had to find a way to design the cards without using Google Maps so that we could make it simple, yet elegant. In doing so I made sure to implement the logic to adjust the theming of each game based on what type of game it is (1v1, 2v2, 3v3….). It looks a little crazy and fun, but this was exactly the goal to give the page a slight pop from the rest of the standard simple UI that you can find elsewhere. This component will be compared to the original version’s code because there was a lot that was cut down in order to create better results. The first thing one can see is the cutdown in the amount of code used to create virtually the same logic. I came to the conclusion that if the game prop has the teammates already in it as an object, then we wouldn’t need to re-fetch the teammates based on the game information, we could just use the .find method on the object values and check to see if the current user is a teammate of the game. If the current user is already in the game, we know to handle Leaving the game, otherwise the user is trying to join this game. Also notice that this is an example of where I called getCurrentUserID to then use this information within the program, rather than using context as in the new version and passing it in as a single prop that can be reused.\n// NEW export default function FindGameCard({ game, user, refresh, setRefresh }) { const [isUserAlreadyInsideGame, setUserAlreadyInAGame] = useState(false) const [open, setOpen] = useState(false); useEffect(() =\u003e { const isTeammateInGame = () =\u003e { let result = Object.values(game?.teammates).find((value) =\u003e value === user.id.toString()) if (result === undefined || result === null) { setUserAlreadyInAGame(false) } else { setUserAlreadyInAGame(true) } } isTeammateInGame() }, [game, user]) // OLD const FindGameCard = ({ props }) =\u003e { const { game, refreshToken, setRefreshToken } = props; const [teammatesIdArray, setTeammatesIdArray] = useState([]); const MAX_PLAYERS = parseInt(game.gameType) * 2 const CURRENT_NUMBER_TEAMMATES = teammatesIdArray \u0026\u0026 teammatesIdArray.length \u003e 0 ? teammatesIdArray.length : 0; const [currentUserID, setCurrentUserID] = useState([]) useEffect(() =\u003e { const getArrayOfTeammates = async () =\u003e { try { const result = await axios.get('https://hoop-easy-production.up.railway.app/api/getTeammates', { params: game }); if (result.data \u0026\u0026 result.data[0] \u0026\u0026 result.data[0].teammates) { const teammates = result.data[0].teammates; const teammatesArray = Object.keys(teammates).map(key =\u003e teammates[key]); setTeammatesIdArray(teammatesArray); } else { console.error('Unexpected response structure:', result.data); } } catch (error) { console.error('Error fetching teammates:', error); } }; const getCurrentUserID = async () =\u003e { const currentUserEmail = auth?.currentUser?.email if (currentUserEmail !== undefined) { const result = await axios.get(`https://hoop-easy-production.up.railway.app/api/getCurrentUserID?email=${currentUserEmail}`); setCurrentUserID(result.data) } } getArrayOfTeammates() getCurrentUserID() }, [refreshToken]); The handleJoinGame and handleLeaveGame methods are almost identical, so I do not need to show them here, however, the calculation of key details that appear on the page is cleaned up tremendously as you can see below. I even use a hashMap for fast look-up times in order to get the theme to be used on each card, based on the type of game it is (1v1 = 1, 2v2 = 2, etc…). Everything in the new version is clear and concise, where the old version is slightly upsetting.\n// NEW const theme = useTheme() const colorHashMap = { 1: theme.palette.primary.orange_200, 2: theme.palette.primary.orange_300, 3: theme.palette.primary.orange_400, 4: theme.palette.primary.main, 5: theme.palette.primary.orange_600, } let { date, time } = extractDateTime(game?.time) let numberOfPlayersJoined = Object.values(game.teammates).length let maxNumberOfPlayers = parseInt(game?.gameType * 2) let playersNeeded = maxNumberOfPlayers - numberOfPlayersJoined // OLD -- Makes me sad that these were both done by the same developer and do the same thing at the end (both me)... // @input: ['2', '3'] // @return: '{\"teammate0\": \"1\", \"teammate1\": \"2\"}' const createTeammateJsonFromArray = (array) =\u003e { const jsonArray = [] for (let i=0; i\u003carray.length; i++) { if (array[i] !== undefined) { const string = `\"teammate${i}\": \"${array[i]}\"` jsonArray.push(string) } } const jsonInside = jsonArray.join(', ') const json = '{' + jsonInside + '}' return json } const playerSlots = Array.from({ length: MAX_PLAYERS }, (_, index) =\u003e { const className = index \u003c CURRENT_NUMBER_TEAMMATES ? 'taken' : 'open'; return \u003cdiv key={index} className={className}\u003e\u003c/div\u003e; }); // We disable the player's ability to join a game if they are already a teammate of the game -- So they can leave the game instead const disablePlayerAbilityToJoinGame = teammatesIdArray ? teammatesIdArray.some((player) =\u003e player.toString() === currentUserID.toString()) : false; if ( CURRENT_NUMBER_TEAMMATES \u003c= 0 ) { return \u003cdiv style={{display: 'none'}}\u003e\u003c/div\u003e } // Expecting 2024-01-28 01:40:00 which is 5:40pm in my time const convertedDateTime = convertToLocalTime(game.dateOfGameInUTC) const {latitude, longitude} = game // Removes the country so that it fits well in the card const indexOfCountry = game.address.lastIndexOf(',') const address = game.address.slice(0, indexOfCountry) const buttonStyling = { backgroundColor: 'var(--background-gradient-start)', color: 'white', '\u0026:hover': { backgroundColor: 'var(--background-dark-orange)' } } Create a Game The create a game component is arguably the most important component in the entire application. As simple as it seems, there would be no app without games! This being said, we as a team had many discussions about how we can minimize the amount of time and effort it takes for a user to complete this form. We also had to move away from the @vis.gl/react-google-maps API due to its lack of efficiency and use the react-places-autocomplete package. Its UI isn’t quite as appealing (which is always something we can change later on, but this is being discussed in production) but the usability is nearly the exact same as before.\nThe picture on the left shows the canva design of the very first model we had in mind for creating a game, and while I still love the dark design we had, it is the simplification in steps that is appreciated. Rather than 6 required steps (not even including the game type at this point in the design/implementation process), we now use four, and the use of the Google Places API is crucial in creating this change and simplification for the user! Map View As I was refactoring the code for the project, I realized that there may be a way to improve the user experience in an easy way — add a map to the UI. Without the map, everything looks a little too plain, and doesn’t fully attract the user to any one place in the UI, however, by adding the map to the UI, it allows both computer users and phone users of the product to easily find a game close to them visually rather than just from the card that is shown.\nKnowing that we have already used the Dialog modal box in multiple other places, I thought it would be appropriate to make the map such that each point on it could be clicked, which would open the dialog box, with the same cards you can see in the list view of Find a Game!\nAs you can see below, when the user clicks the single game that exists on the map, it shows the same card from the list view! This is useful because it not only creates a more attractive experience than scrolling through (supposedly) hundreds of games to find the one you want, but also uses a feature that is familiar to the user and reusable and useful for our original goal with memory efficiency!\nDeployment and Last Touches The final step after changing some of the little UI decisions and theming ideas is to deploy it. The first thing that I had to do was create a Dockerfile for the application that could take in arguments of environment variables passed down from Railway so that we could have secure variables.\nFROM node:18-alpine AS Production # Set default values for environment variables ENV NODE_ENV=production ENV REACT_APP_APIKEY=default_value ENV REACT_APP_APPID=default_value ENV REACT_APP_DOMAIN=default_value ENV REACT_APP_MEASUREMENT=default_value ENV REACT_APP_MSI=default_value ENV REACT_APP_PORT=default_value ENV REACT_APP_PROJECTID=default_value ENV REACT_APP_STORAGE=default_value ENV REACT_APP_GOOGLE_API=default_value WORKDIR /app/src/hoop-easy-mui COPY package*.json ./ RUN npm install COPY . . # Replace default values with Railway shared variables ARG APIKEY ARG APPID ARG DOMAIN ARG MEASUREMENT ARG MSI ARG PORT ARG PROJECTID ARG STORAGE ARG GOOGLE_API ENV REACT_APP_APIKEY=$APIKEY ENV REACT_APP_APPID=$APPID ENV REACT_APP_DOMAIN=$DOMAIN ENV REACT_APP_MEASUREMENT=$MEASUREMENT ENV REACT_APP_MSI=$MSI ENV REACT_APP_PORT=$PORT ENV REACT_APP_PROJECTID=$PROJECTID ENV REACT_APP_STORAGE=$STORAGE ENV REACT_APP_GOOGLE_API=$GOOGLE_API RUN npm run build CMD [\"npx\", \"serve\", \"-s\", \"build\"] While it took some playing around, I was able to figure out the correct settings to prevent any errors from ESLint seen in the application, and made sure that there were not environment variables that still existing for people to see.\nRailway is a platform that helps simplify the process of deployment, and automatically detected my Dockerfile to help spin it up.\nAfter successfully hosting the application through Railway, it was officially time to purchase a domain name — hoopeasy.org !!!!\nNo Longer Hosted\n","wordCount":"3926","inLanguage":"en","image":"http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-05-01T00:00:00Z","dateModified":"2024-05-01T00:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/projects/10_hoopeasy/"},"publisher":{"@type":"Organization","name":"McSlarrowPortfolio","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Home (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/about/ title="about me"><span>about me</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/projects/>Projects</a></div><h1 class="post-title entry-hint-parent">HoopEasy</h1></header><div class=post-content><h2 id=github-link>Github Link<a hidden class=anchor aria-hidden=true href=#github-link>#</a></h2><ul><li>Original draft: <a href=https://github.com/Pmcslarrow/hoop-easy>https://github.com/Pmcslarrow/hoop-easy</a></li><li>Refactor: <a href=https://github.com/Pmcslarrow/hoop-easy-material-ui/>https://github.com/Pmcslarrow/hoop-easy-material-ui/</a></li></ul><h2 id=overview>Overview<a hidden class=anchor aria-hidden=true href=#overview>#</a></h2><p>The document below is my README file within my <a href=https://github.com/Pmcslarrow/hoop-easy-material-ui/>GitHub repo</a> for the refactoring of HoopEasy. The project is an application designed to help people easily find pickup basketball games near them, while also using an ELO system to track global rankings. Although it was never fully marketed or widely adopted, this was my first large-scale full-stack project completed during undergrad. It was a rewarding experience that brought together many of the skills I had learned.</p><p>Below you will find the first draft of HoopEasy (also found in a demo at this <a href=https://youtu.be/HxctMFg9pFY>link</a>).</p><p>The GitHub repository implements optimizations to enhance memory efficiency through strategic use of React&rsquo;s useCallback hook and improves the overall user interface for better usability.</p><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><hr><p><em>HoopEasy is an application built for the basketball community to help find pickup games near you, and in the process, climb the global rank ladder to the top.</em></p><p>In roughly three months, I worked with two students in the MBA program at Willamette University on a new venture, HoopEasy. While HoopEasy is hosted online and fully functioning, I feel a sense of responsibility as a developer to focus on the quality of the product. With this in mind, I&rsquo;ve concluded that the overhead memory of the application is too high, primarily due to the overuse of JSX and poorly utilized React hooks.</p><p>Reflecting on the project, I am extremely proud to have created a full-stack application from scratch without relying on someone else’s YouTube tutorial. However, it&rsquo;s clear that the efficiency came with some consequences. My new goal is to recreate HoopEasy behind the scenes while the MBA students focus on establishing a user base. In doing so, I will learn from my mistakes and aim to use UI libraries, as well as limit unnecessary re-renders.</p><p>Despite feeling empowered to use raw JSX and CSS to develop the entire application in the old version, the reality is that there are UI libraries available that I can leverage to create a similar application with less overhead memory. I will be using Material UI’s (MUI) library to recreate HoopEasy in a way that is still reactive, easier for users to navigate, and has lower overhead memory.</p><p><em><strong>I am pleased to report that in only 2-3 weeks, I successfully recreated almost the same concept as in the old version, but reimagined to enhance user experience and alleviate the memory usage issue that initiated this journey. The memory has officially been reduced from around 500 MB on average to between 57 MB and 103 MB.</strong></em></p><h2 id=theming>Theming<a hidden class=anchor aria-hidden=true href=#theming>#</a></h2><hr><p>To begin, I had to get a good theme created that wraps every route to the application (that we have so far). In doing so, we leverage MUI’s theming abilities to create the color, typography, and more that hold the overall theme structure together.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>theme</span> <span class=o>=</span> <span class=nx>createTheme</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>palette</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>primary</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>main</span><span class=o>:</span> <span class=s1>&#39;#1d3557&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>contrastText</span><span class=o>:</span> <span class=s1>&#39;#fff&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=nx>secondary</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>main</span><span class=o>:</span> <span class=s1>&#39;#1d3557&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>darkBlue</span><span class=o>:</span> <span class=s1>&#39;#457b9d&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>lightBlue</span><span class=o>:</span> <span class=s1>&#39;#a8dadc&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>lightRed</span><span class=o>:</span> <span class=s1>&#39;#ee747e&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>red</span><span class=o>:</span> <span class=s1>&#39;#e63946&#39;</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>typography</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fontFamily</span><span class=o>:</span> <span class=s1>&#39;Quicksand&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>fontWeightLight</span><span class=o>:</span> <span class=mi>400</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>fontWeightRegular</span><span class=o>:</span> <span class=mi>500</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>fontWeightMedium</span><span class=o>:</span> <span class=mi>600</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>fontWeightBold</span><span class=o>:</span> <span class=mi>700</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>spacing</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><h2 id=authentication>Authentication<a hidden class=anchor aria-hidden=true href=#authentication>#</a></h2><hr><p>Looking back at the code I wrote early on in the authentication process, it was confusing. I was writing my javascript in a C-like format where functions return nullish values when they fail, and otherwise return back the data. Saying this outloud I realized that Javascript has functionality for this out of box that could make the code more precise, and in which handles errors well — Promises. This was fixed for both login and createAccount. We will draw examples from creating a new user.</p><h3 id=old-handling-no-promises>Old handling (no promises)<a hidden class=anchor aria-hidden=true href=#old-handling-no-promises>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>handleSubmit</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>e</span><span class=p>.</span><span class=nx>preventDefault</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>isEmpty</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span> <span class=nx>passwordsDontMatch</span><span class=p>()</span> <span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>userCredential</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>createUserWithEmailAndPassword</span><span class=p>(</span><span class=nx>auth</span><span class=p>,</span> <span class=nx>formData</span><span class=p>.</span><span class=nx>email</span><span class=p>,</span> <span class=nx>formData</span><span class=p>.</span><span class=nx>password</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>addNewUser</span><span class=p>();</span>
</span></span><span class=line><span class=cl>      <span class=kr>await</span> <span class=nx>sendEmailVerification</span><span class=p>(</span><span class=nx>userCredential</span><span class=p>.</span><span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>setMessage</span><span class=p>(</span><span class=s2>&#34;Please verify your email.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>setError</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>      <span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>navigate</span><span class=p>(</span><span class=s2>&#34;/login&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span> <span class=mi>5000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>handleError</span><span class=p>(</span><span class=nx>setError</span><span class=p>,</span> <span class=nx>setMessage</span><span class=p>,</span> <span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span></code></pre></div><h3 id=new-handling-promises>New handling (promises)<a hidden class=anchor aria-hidden=true href=#new-handling-promises>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>createNewUser</span><span class=p>(</span><span class=nx>first</span><span class=p>,</span> <span class=nx>last</span><span class=p>,</span> <span class=nx>username</span><span class=p>,</span> <span class=nx>email</span><span class=p>,</span> <span class=nx>password</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>isEmpty</span><span class=p>([</span><span class=nx>first</span><span class=p>,</span> <span class=nx>last</span><span class=p>,</span> <span class=nx>username</span><span class=p>,</span> <span class=nx>email</span><span class=p>,</span> <span class=nx>password</span><span class=p>]))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>reject</span><span class=p>(</span><span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s2>&#34;Empty fields&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=nx>createUserWithEmailAndPassword</span><span class=p>(</span><span class=nx>auth</span><span class=p>,</span> <span class=nx>email</span><span class=p>,</span> <span class=nx>password</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>userCredentials</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=nx>addNewUserToDatabase</span><span class=p>(</span><span class=nx>first</span><span class=p>,</span> <span class=nx>last</span><span class=p>,</span> <span class=nx>username</span><span class=p>,</span> <span class=nx>email</span><span class=p>,</span> <span class=nx>password</span><span class=p>)</span>
</span></span><span class=line><span class=cl>              <span class=nx>resolve</span><span class=p>(</span><span class=nx>userCredentials</span><span class=p>)</span>
</span></span><span class=line><span class=cl>              <span class=nx>sendEmailVerification</span><span class=p>(</span><span class=nx>userCredentials</span><span class=p>.</span><span class=nx>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=p>})</span>
</span></span><span class=line><span class=cl>          <span class=p>.</span><span class=k>catch</span><span class=p>((</span><span class=nx>err</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=nx>reject</span><span class=p>(</span><span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s2>&#34;Failed to create new user&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>          <span class=p>})</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>handleSubmit</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>event</span><span class=p>.</span><span class=nx>preventDefault</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>FormData</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>currentTarget</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>createNewUser</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=nx>data</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;firstName&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>data</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;lastName&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>data</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;username&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>data</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;email&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>data</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;password&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>then</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>navigate</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}).</span><span class=k>catch</span><span class=p>((</span><span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>res</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><h3 id=new-vs-old-authentication-ui-comparison>New vs. Old Authentication UI Comparison<a hidden class=anchor aria-hidden=true href=#new-vs-old-authentication-ui-comparison>#</a></h3><p><img alt="Screenshot 2024-04-22 at 9 38 19\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/8f585959-94eb-437b-89d5-4ca4058ce92d>
<img alt="Screenshot 2024-04-22 at 9 39 03\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/f172a3a0-f584-4d01-ae8e-99bb703f4e53></p><h2 id=homepage>Homepage<a hidden class=anchor aria-hidden=true href=#homepage>#</a></h2><hr><p>While the homepage which holds all the core functionality is simple, I believe that we can improve it. The homepage has three key components: How to play, My Games, and History. The page was a more inefficient version of functionality to go through the steps of creating, finding, playing, and submitting game results.</p><p>Instead of having three components that take up 100% of the viewport height each, I am going to give the page a dashboard sort of feel. A central hub where you can do the same things as the old version of the app, but more condensed.
<img alt="Screenshot 2024-04-22 at 9 39 44\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/3bd4e0e4-2c4a-4b58-a9af-585487a2d227>
<img alt="Screenshot 2024-04-22 at 9 29 00\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/0d809dd2-a5a2-45fd-a5a8-e5a9dcf0f86d>
We will start with the general statistics components and what was changed in order to drive efficiency.</p><h2 id=general-statistics>General Statistics<a hidden class=anchor aria-hidden=true href=#general-statistics>#</a></h2><hr><p>The general statistics component is used as the replacement for the rankings page that existed on the original HoopEasy app. The new version uses MaterialUI’s built in Pagination system to make the component more compact and elegant at once. At the top left of the entire wrapped component, the overall rating is shown, rather than staying sticky at the bottom left of the user’s screen at all times. One area where I focused on improvements in my code was in the overcalculation of certain parameters (getting user ID, getting overall rating, calculating ranks in line…). In the old version of the application, I would go through the process of fetching the current user ID and then plugging this user ID into another fetch call which would get the users overall rating… This was a waste of resources. Instead, I knew that the overall rating was attached to each user profile, and we are using useContext at the top level of the application to hold the user’s information and then pass props with it later on in the homepage. Given this information, I instead used useEffect and passed in the [user] as one of the dependencies to refresh all of the data for, so that when there was a reason for the user’s information to update on the page (say the user won a game and their overall rating increased), then the useEffect would re-fetch the updated user information this way once instead of multiple times. The same logic I just described is the backbone of the improvement of code for nearly each component. Instead of unnecessary re-rendering from the old code, I managed to improve these unnecessary calls with the use of native React hooks. The other thing that I noticed was using wasted overhead memory, was the location in which each element was called. In the old version, I had each individual component become a sibling or a child of one parent component. This meant that whenever the most important parent component re-rendered, it automatically would re-render the components down the DOM tree which was not necessary.</p><h3 id=old-code>Old Code<a hidden class=anchor aria-hidden=true href=#old-code>#</a></h3><p>You can’t see it in one copy, however, the currentUserID was calculated in the parent component useEffect, and forced a re-render of the PlayerOverallRating without regards to when it should actually re-render. We also made a point earlier that we would move towards using more error handling instances in the code. And rather than holding the user, and the userID separately, we made sure to use one User which we could draw our information from.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>PlayerOverallRating</span> <span class=o>=</span> <span class=p>({</span><span class=nx>currentUserID</span><span class=p>,</span> <span class=nx>refreshToken</span><span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>overallRating</span><span class=p>,</span> <span class=nx>setOverallRating</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>getOverallRating</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=sb>`https://hoop-easy-production.up.railway.app/api/getUserWithID?userID=</span><span class=si>${</span><span class=nx>currentUserID</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nx>setOverallRating</span><span class=p>(</span><span class=nb>parseFloat</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>overall</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>getOverallRating</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=p>[</span><span class=nx>refreshToken</span><span class=p>])</span>
</span></span></code></pre></div><h3 id=new-code>New Code<a hidden class=anchor aria-hidden=true href=#new-code>#</a></h3><p>The new code only re-renders on a manaul refresh. This seems very similar to the old version, but the major difference is that it does not force re-renders anymore for multiple other components when this happens, it only manually adjust a select handful.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>getUser</span><span class=p>(</span><span class=nx>user</span><span class=o>?</span><span class=p>.</span><span class=nx>email</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[</span><span class=nx>refresh</span><span class=p>])</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* Inside App.js */</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>getUser</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>useCallback</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>email</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	  <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=sb>`https://hoop-easy-production.up.railway.app/api/getUser?email=</span><span class=si>${</span><span class=nx>email</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>setCurrentUser</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span></code></pre></div><h2 id=my-games>My Games<a hidden class=anchor aria-hidden=true href=#my-games>#</a></h2><hr><p>The updated version of the My Games component uses multiple different ideas in order to drive efficiency with regards to memory, and efficiency in how it will make it easier for the user experience. Two new components exist at the top to give the user an easy way to view how many games they have coming up, or that they have past (probably meaning that they played this game and need to submit scores and verify). Rather than having to use the slider from the older version to find your games, we make sure to re-use the same component used for the General Statistics component, with different data and headers that are passed in. In doing so, we remove any wasted overhead memory that didn’t need to be used. Another way that we reused components was with the Dialog modal we will talk about directly after this section.</p><p>With regards to the user experience, we made sure to let the user hover over elements of this list (which become highlighted light blue) and in which they can click, to open up the form for submitting game information. This modal is one of the most important components in the application, because we re-use it in three key circumstances to reduce any waste in our code; these components include the ScoreInputComponent, VerifyScoreComponent, and CreateGameForm, all used from this one component.</p><p><img alt="Screenshot 2024-04-22 at 9 31 42\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/b9311ac3-f6e1-43a7-bcda-a3bd44cd98df></p><h3 id=submitting-scores>Submitting Scores<a hidden class=anchor aria-hidden=true href=#submitting-scores>#</a></h3><p>When clicked, the user is able to submit scores and captains of the game in a very familiar way to the previous application, except use a single form rather than a three step drawer that used up lots of memory in the previous app:
<img alt="Screenshot 2024-04-22 at 9 32 05\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/7825c073-679b-49e8-9dee-45154bc396e8></p><h3 id=verifying-scores>Verifying Scores<a hidden class=anchor aria-hidden=true href=#verifying-scores>#</a></h3><p>As much as we loved the design of the old card in this stage, we needed to remove the @vis.gl/react-google-maps API as it was causing too long of renders shown from the React Profiler built into Google Chrome to analyze efficiency in our components. While we ended up using vis.gl for the large map discussed later on, it was wasted overhead memory having multiple list view items containing their own map components each, which would all have too long of re-renders everytime the user adjusted data, or their screen size on the old version. Removing it only made sense.</p><p>Using the same table and modal to enforce familiarity in the application, we implement a very similar logic system from the old to the new version for this step, except that we cannot show Accept and Deny inside the table so we use the Dialog modal again:
<img alt="Screenshot 2024-04-22 at 9 41 14\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/f6c0c325-4e47-4d18-ab7b-12090c2861a3>
<img alt="Screenshot 2024-04-22 at 9 41 37\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/8534e5b5-a66f-401e-aad1-f8add671c568></p><p>When the second captain verifies the game, it goes through the process of using our manual refresh mentioned earlier, which will then re-render the three main components of the application because it is the instance that requires a change in every component on the page, which is expected.</p><h3 id=under-the-hood>Under the Hood<a hidden class=anchor aria-hidden=true href=#under-the-hood>#</a></h3><p>We have discussed the high level user understanding of what is expected from each component. Now it is appropriate to discuss a few of the code examples that were adjusted under the hood, in order to drive efficiency in the refactor of HoopEasy.</p><p>The first thing that we must describe is how we actually re-use the two same components (General Statistics and My Games) at the top of the page, with different data. We accomplish this by using a single wrapper that takes in some props as a parameter with the data that should be filled in accordingly. It takes in GridAttributes, which contain the title of the page, and the data that should go into the two blue boxes at the top, and then the data to fill the table.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// GridAttributes which are passed in for My Games
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>AttRight</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;My Games&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>blockOneTitle</span><span class=o>:</span> <span class=s1>&#39;Upcoming&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>blockOneValue</span><span class=o>:</span> <span class=nx>upcomingGamesCount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>blockTwoTitle</span><span class=o>:</span> <span class=s1>&#39;Past&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>blockTwoValue</span><span class=o>:</span> <span class=nx>gamesPlayedCount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>component</span><span class=o>:</span> <span class=o>&lt;</span><span class=nx>CustomPaginationActionsTable</span> <span class=nx>rows</span><span class=o>=</span><span class=p>{</span><span class=nx>myGames</span> <span class=o>??</span> <span class=p>[{</span><span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;empty&#39;</span><span class=p>,</span> <span class=nx>overall</span><span class=o>:</span> <span class=s1>&#39;empty&#39;</span><span class=p>,</span> <span class=nx>rank</span><span class=o>:</span> <span class=s1>&#39;empty&#39;</span><span class=p>,</span> <span class=nx>gamesPlayed</span><span class=o>:</span> <span class=s1>&#39;empty&#39;</span><span class=p>}]}</span> <span class=nx>columnNames</span><span class=o>=</span><span class=p>{</span><span class=nx>myGamesCols</span><span class=p>}</span> <span class=nx>isMyGames</span><span class=o>=</span><span class=p>{</span><span class=kc>true</span><span class=p>}</span> <span class=nx>user</span><span class=o>=</span><span class=p>{</span><span class=nx>user</span><span class=p>}</span> <span class=nx>setRefresh</span><span class=o>=</span><span class=p>{</span><span class=nx>setRefresh</span><span class=p>}</span> <span class=nx>refresh</span><span class=o>=</span><span class=p>{</span><span class=nx>refresh</span><span class=p>}</span><span class=o>/&gt;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * The SmallGrid is used for the two tables on the homepage. It lets you pass in data to customize the table, and have 
</span></span></span><span class=line><span class=cl><span class=cm>   highlight attributes at the top
</span></span></span><span class=line><span class=cl><span class=cm> * @param {string} title
</span></span></span><span class=line><span class=cl><span class=cm> * @param {object} GridAttributes - { title, blockOneTitle, blockOneValue, blockTwoTitle, blockTwoValue, component }
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>SmallGrid</span><span class=p>({</span><span class=nx>GridAttributes</span><span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>Box</span> <span class=nx>sx</span><span class=o>=</span><span class=p>{{</span> <span class=nx>flexGrow</span><span class=o>:</span> <span class=mi>1</span><span class=p>}}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>Typography</span> <span class=nx>variant</span><span class=o>=</span><span class=s2>&#34;h5&#34;</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>GridAttributes</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/Typography&gt;  </span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>br</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>Grid</span> <span class=nx>container</span> <span class=nx>spacing</span><span class=o>=</span><span class=p>{</span><span class=mi>1</span><span class=p>}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>Grid</span> <span class=nx>item</span> <span class=nx>xs</span><span class=o>=</span><span class=p>{</span><span class=mi>4</span><span class=p>}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=nx>Item</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=o>&lt;</span><span class=nx>Typography</span> <span class=nx>variant</span><span class=o>=</span><span class=s2>&#34;body2&#34;</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>GridAttributes</span><span class=p>.</span><span class=nx>blockOneTitle</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/Typography&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=p>{</span><span class=nx>GridAttributes</span><span class=p>.</span><span class=nx>blockOneValue</span><span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=err>/Item&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=err>/Grid&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>Grid</span> <span class=nx>item</span> <span class=nx>xs</span><span class=o>=</span><span class=p>{</span><span class=mi>4</span><span class=p>}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=nx>Item</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=o>&lt;</span><span class=nx>Typography</span> <span class=nx>variant</span><span class=o>=</span><span class=s2>&#34;body2&#34;</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>GridAttributes</span><span class=p>.</span><span class=nx>blockTwoTitle</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/Typography&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=p>{</span><span class=nx>GridAttributes</span><span class=p>.</span><span class=nx>blockTwoValue</span><span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=err>/Item&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=err>/Grid&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>Grid</span> <span class=nx>item</span> <span class=nx>xs</span><span class=o>=</span><span class=p>{</span><span class=mi>12</span><span class=p>}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=p>{</span><span class=nx>GridAttributes</span><span class=p>.</span><span class=nx>component</span><span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=err>/Grid&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/Grid&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/Box&gt;        </span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Since we have used TablePagination.jsx as the reusable component for the top two parent components, the logic that drives what happens in the My Games section works a little differently. Inside the Table, we use inline logic that tells the program that IF we pass in the MyGames component in, allow the user to click the rows, and if they do click the rows, handleRowClick as seen below. When handling the row clicks, we must check what type of game we are looking at to choose which component that the dialog modal should show. If the game is a ‘confirmed’ game, then we know the user still has to submit the scores of the game, so we set the selected component to this and open the dialog. If the game is a ‘verification’ game, then we know the game stats were submitted, and we need to show the logic for verifying a game.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>handleRowClick</span> <span class=o>=</span> <span class=p>(</span><span class=nx>game</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>setSelectedGame</span><span class=p>(</span><span class=nx>game</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>game</span><span class=p>.</span><span class=nx>col1</span> <span class=o>===</span> <span class=s1>&#39;confirmed&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>setSelectedComponent</span><span class=p>(</span><span class=o>&lt;</span><span class=nx>SubmitGameData</span> <span class=nx>user</span><span class=o>=</span><span class=p>{</span><span class=nx>user</span><span class=p>}</span> <span class=nx>game</span><span class=o>=</span><span class=p>{</span><span class=nx>game</span><span class=p>}</span> <span class=nx>refresh</span><span class=o>=</span><span class=p>{</span><span class=nx>refresh</span><span class=p>}</span> <span class=nx>setRefresh</span><span class=o>=</span><span class=p>{</span><span class=nx>setRefresh</span><span class=p>}</span> <span class=nx>handleClose</span><span class=o>=</span><span class=p>{</span><span class=nx>handleClose</span><span class=p>}</span><span class=o>/&gt;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nx>setDialogOpen</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>game</span><span class=p>.</span><span class=nx>col1</span> <span class=o>===</span> <span class=s1>&#39;verification&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>setSelectedComponent</span><span class=p>(</span><span class=o>&lt;</span><span class=nx>VerifyGame</span> <span class=nx>user</span><span class=o>=</span><span class=p>{</span><span class=nx>user</span><span class=p>}</span> <span class=nx>game</span><span class=o>=</span><span class=p>{</span><span class=nx>game</span><span class=p>}</span> <span class=nx>refresh</span><span class=o>=</span><span class=p>{</span><span class=nx>refresh</span><span class=p>}</span> <span class=nx>setRefresh</span><span class=o>=</span><span class=p>{</span><span class=nx>setRefresh</span><span class=p>}</span> <span class=nx>handleClose</span><span class=o>=</span><span class=p>{</span><span class=nx>handleClose</span><span class=p>}</span><span class=nx>re</span><span class=o>/&gt;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nx>setDialogOpen</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The old version of this similar logic is shown below. It was too confusing for anyone passing by the code to understand. It looks clean, however, I personally apologize for anyone that may have had to look at this because in some cases it returns components, and then it also returns a function which returns a component and more under the hood. It was not simplified enough.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>renderLowerCardSection</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>type</span> <span class=o>===</span> <span class=s1>&#39;pending&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=o>&lt;</span><span class=nx>WaitingForGameAcceptance</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>type</span> <span class=o>===</span> <span class=s1>&#39;confirmed&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=o>&lt;</span><span class=nx>ScoreInputComponent</span> <span class=nx>props</span><span class=o>=</span><span class=p>{{</span><span class=nx>currentCard</span><span class=p>,</span> <span class=nx>currentUserID</span><span class=p>,</span> <span class=nx>refreshToken</span><span class=p>,</span> <span class=nx>setRefreshToken</span><span class=p>}}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>type</span> <span class=o>===</span> <span class=s1>&#39;verification&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>handleVerificationStage</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=p>};</span>
</span></span></code></pre></div><p>Nearly every single line of code was rewritten, so for the purpose of this document, it would not be appropriate to explain every piece of logic in the application, but only a subset of changes that could be useful in seeing how it was improved.</p><h2 id=find-a-game>Find a Game<a hidden class=anchor aria-hidden=true href=#find-a-game>#</a></h2><hr><p>Another component that was completely redesigned was finding a game. I had to find a way to design the cards without using Google Maps so that we could make it simple, yet elegant. In doing so I made sure to implement the logic to adjust the theming of each game based on what type of game it is (1v1, 2v2, 3v3….). It looks a little crazy and fun, but this was exactly the goal to give the page a slight pop from the rest of the standard simple UI that you can find elsewhere.
<img alt="Screenshot 2024-04-22 at 9 35 07\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/f17d5c88-7f28-45e2-a4ff-51fe558c4940>
<img alt="Screenshot 2024-04-22 at 9 35 49\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/1542c679-4095-43e0-aa65-d1bc158d4f46></p><p>This component will be compared to the original version’s code because there was a lot that was cut down in order to create better results. The first thing one can see is the cutdown in the amount of code used to create virtually the same logic. I came to the conclusion that if the game prop has the teammates already in it as an object, then we wouldn’t need to re-fetch the teammates based on the game information, we could just use the .find method on the object values and check to see if the current user is a teammate of the game. If the current user is already in the game, we know to handle Leaving the game, otherwise the user is trying to join this game. Also notice that this is an example of where I called getCurrentUserID to then use this information within the program, rather than using context as in the new version and passing it in as a single prop that can be reused.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// NEW
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=nx>FindGameCard</span><span class=p>({</span> <span class=nx>game</span><span class=p>,</span> <span class=nx>user</span><span class=p>,</span> <span class=nx>refresh</span><span class=p>,</span> <span class=nx>setRefresh</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>isUserAlreadyInsideGame</span><span class=p>,</span> <span class=nx>setUserAlreadyInAGame</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>open</span><span class=p>,</span> <span class=nx>setOpen</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>isTeammateInGame</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>let</span> <span class=nx>result</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>values</span><span class=p>(</span><span class=nx>game</span><span class=o>?</span><span class=p>.</span><span class=nx>teammates</span><span class=p>).</span><span class=nx>find</span><span class=p>((</span><span class=nx>value</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>value</span> <span class=o>===</span> <span class=nx>user</span><span class=p>.</span><span class=nx>id</span><span class=p>.</span><span class=nx>toString</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>result</span> <span class=o>===</span> <span class=kc>undefined</span> <span class=o>||</span> <span class=nx>result</span> <span class=o>===</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>setUserAlreadyInAGame</span><span class=p>(</span><span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>setUserAlreadyInAGame</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>    
</span></span><span class=line><span class=cl>        <span class=nx>isTeammateInGame</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=p>[</span><span class=nx>game</span><span class=p>,</span> <span class=nx>user</span><span class=p>])</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// OLD
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>FindGameCard</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>props</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>game</span><span class=p>,</span> <span class=nx>refreshToken</span><span class=p>,</span> <span class=nx>setRefreshToken</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>props</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>teammatesIdArray</span><span class=p>,</span> <span class=nx>setTeammatesIdArray</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>([]);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>MAX_PLAYERS</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>game</span><span class=p>.</span><span class=nx>gameType</span><span class=p>)</span> <span class=o>*</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>CURRENT_NUMBER_TEAMMATES</span> <span class=o>=</span> <span class=nx>teammatesIdArray</span> <span class=o>&amp;&amp;</span> <span class=nx>teammatesIdArray</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>?</span> <span class=nx>teammatesIdArray</span><span class=p>.</span><span class=nx>length</span> <span class=o>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>currentUserID</span><span class=p>,</span> <span class=nx>setCurrentUserID</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>([])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>getArrayOfTeammates</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://hoop-easy-production.up.railway.app/api/getTeammates&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>params</span><span class=o>:</span> <span class=nx>game</span> <span class=p>});</span>        
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=nx>result</span><span class=p>.</span><span class=nx>data</span> <span class=o>&amp;&amp;</span> <span class=nx>result</span><span class=p>.</span><span class=nx>data</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=nx>result</span><span class=p>.</span><span class=nx>data</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>teammates</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=kr>const</span> <span class=nx>teammates</span> <span class=o>=</span> <span class=nx>result</span><span class=p>.</span><span class=nx>data</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>teammates</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=kr>const</span> <span class=nx>teammatesArray</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>teammates</span><span class=p>).</span><span class=nx>map</span><span class=p>(</span><span class=nx>key</span> <span class=p>=&gt;</span> <span class=nx>teammates</span><span class=p>[</span><span class=nx>key</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>                    <span class=nx>setTeammatesIdArray</span><span class=p>(</span><span class=nx>teammatesArray</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Unexpected response structure:&#39;</span><span class=p>,</span> <span class=nx>result</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error fetching teammates:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>getCurrentUserID</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>currentUserEmail</span> <span class=o>=</span> <span class=nx>auth</span><span class=o>?</span><span class=p>.</span><span class=nx>currentUser</span><span class=o>?</span><span class=p>.</span><span class=nx>email</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>currentUserEmail</span> <span class=o>!==</span> <span class=kc>undefined</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=sb>`https://hoop-easy-production.up.railway.app/api/getCurrentUserID?email=</span><span class=si>${</span><span class=nx>currentUserEmail</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>setCurrentUserID</span><span class=p>(</span><span class=nx>result</span><span class=p>.</span><span class=nx>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=nx>getArrayOfTeammates</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nx>getCurrentUserID</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=p>[</span><span class=nx>refreshToken</span><span class=p>]);</span>
</span></span></code></pre></div><p>The handleJoinGame and handleLeaveGame methods are almost identical, so I do not need to show them here, however, the calculation of key details that appear on the page is cleaned up tremendously as you can see below. I even use a hashMap for fast look-up times in order to get the theme to be used on each card, based on the type of game it is (1v1 = 1, 2v2 = 2, etc…). Everything in the new version is clear and concise, where the old version is slightly upsetting.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// NEW
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>theme</span> <span class=o>=</span> <span class=nx>useTheme</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>colorHashMap</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=mi>1</span><span class=o>:</span> <span class=nx>theme</span><span class=p>.</span><span class=nx>palette</span><span class=p>.</span><span class=nx>primary</span><span class=p>.</span><span class=nx>orange_200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=mi>2</span><span class=o>:</span> <span class=nx>theme</span><span class=p>.</span><span class=nx>palette</span><span class=p>.</span><span class=nx>primary</span><span class=p>.</span><span class=nx>orange_300</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=mi>3</span><span class=o>:</span> <span class=nx>theme</span><span class=p>.</span><span class=nx>palette</span><span class=p>.</span><span class=nx>primary</span><span class=p>.</span><span class=nx>orange_400</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=mi>4</span><span class=o>:</span> <span class=nx>theme</span><span class=p>.</span><span class=nx>palette</span><span class=p>.</span><span class=nx>primary</span><span class=p>.</span><span class=nx>main</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=mi>5</span><span class=o>:</span> <span class=nx>theme</span><span class=p>.</span><span class=nx>palette</span><span class=p>.</span><span class=nx>primary</span><span class=p>.</span><span class=nx>orange_600</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=p>{</span> <span class=nx>date</span><span class=p>,</span> <span class=nx>time</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>extractDateTime</span><span class=p>(</span><span class=nx>game</span><span class=o>?</span><span class=p>.</span><span class=nx>time</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>numberOfPlayersJoined</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>values</span><span class=p>(</span><span class=nx>game</span><span class=p>.</span><span class=nx>teammates</span><span class=p>).</span><span class=nx>length</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>maxNumberOfPlayers</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>game</span><span class=o>?</span><span class=p>.</span><span class=nx>gameType</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>playersNeeded</span> <span class=o>=</span> <span class=nx>maxNumberOfPlayers</span> <span class=o>-</span> <span class=nx>numberOfPlayersJoined</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// OLD -- Makes me sad that these were both done by the same developer and do the same thing at the end (both me)...
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// @input: [&#39;2&#39;, &#39;3&#39;]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// @return: &#39;{&#34;teammate0&#34;: &#34;1&#34;, &#34;teammate1&#34;: &#34;2&#34;}&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>createTeammateJsonFromArray</span> <span class=o>=</span> <span class=p>(</span><span class=nx>array</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>jsonArray</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=nx>i</span><span class=o>&lt;</span><span class=nx>array</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>array</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=o>!==</span> <span class=kc>undefined</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>string</span> <span class=o>=</span> <span class=sb>`&#34;teammate</span><span class=si>${</span><span class=nx>i</span><span class=si>}</span><span class=sb>&#34;: &#34;</span><span class=si>${</span><span class=nx>array</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span><span class=si>}</span><span class=sb>&#34;`</span>
</span></span><span class=line><span class=cl>                <span class=nx>jsonArray</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>string</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>jsonInside</span> <span class=o>=</span> <span class=nx>jsonArray</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=s1>&#39;, &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>json</span> <span class=o>=</span> <span class=s1>&#39;{&#39;</span> <span class=o>+</span> <span class=nx>jsonInside</span> <span class=o>+</span> <span class=s1>&#39;}&#39;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>json</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>playerSlots</span> <span class=o>=</span> <span class=nb>Array</span><span class=p>.</span><span class=nx>from</span><span class=p>({</span> <span class=nx>length</span><span class=o>:</span> <span class=nx>MAX_PLAYERS</span> <span class=p>},</span> <span class=p>(</span><span class=nx>_</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>className</span> <span class=o>=</span> <span class=nx>index</span> <span class=o>&lt;</span> <span class=nx>CURRENT_NUMBER_TEAMMATES</span> <span class=o>?</span> <span class=s1>&#39;taken&#39;</span> <span class=o>:</span> <span class=s1>&#39;open&#39;</span><span class=p>;</span>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>index</span><span class=p>}</span> <span class=nx>className</span><span class=o>=</span><span class=p>{</span><span class=nx>className</span><span class=p>}</span><span class=o>&gt;&lt;</span><span class=err>/div&gt;;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// We disable the player&#39;s ability to join a game if they are already a teammate of the game -- So they can leave the game instead
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>disablePlayerAbilityToJoinGame</span> <span class=o>=</span> <span class=nx>teammatesIdArray</span> <span class=o>?</span> <span class=nx>teammatesIdArray</span><span class=p>.</span><span class=nx>some</span><span class=p>((</span><span class=nx>player</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>player</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span> <span class=o>===</span> <span class=nx>currentUserID</span><span class=p>.</span><span class=nx>toString</span><span class=p>())</span> <span class=o>:</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span> <span class=nx>CURRENT_NUMBER_TEAMMATES</span> <span class=o>&lt;=</span> <span class=mi>0</span> <span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span><span class=nx>display</span><span class=o>:</span> <span class=s1>&#39;none&#39;</span><span class=p>}}</span><span class=o>&gt;&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Expecting 2024-01-28 01:40:00 which is 5:40pm in my time
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>convertedDateTime</span> <span class=o>=</span> <span class=nx>convertToLocalTime</span><span class=p>(</span><span class=nx>game</span><span class=p>.</span><span class=nx>dateOfGameInUTC</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span><span class=nx>latitude</span><span class=p>,</span> <span class=nx>longitude</span><span class=p>}</span> <span class=o>=</span> <span class=nx>game</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Removes the country so that it fits well in the card
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>indexOfCountry</span> <span class=o>=</span> <span class=nx>game</span><span class=p>.</span><span class=nx>address</span><span class=p>.</span><span class=nx>lastIndexOf</span><span class=p>(</span><span class=s1>&#39;,&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>address</span> <span class=o>=</span> <span class=nx>game</span><span class=p>.</span><span class=nx>address</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nx>indexOfCountry</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>buttonStyling</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>backgroundColor</span><span class=o>:</span> <span class=s1>&#39;var(--background-gradient-start)&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>color</span><span class=o>:</span> <span class=s1>&#39;white&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;&amp;:hover&#39;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>backgroundColor</span><span class=o>:</span> <span class=s1>&#39;var(--background-dark-orange)&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><h2 id=create-a-game>Create a Game<a hidden class=anchor aria-hidden=true href=#create-a-game>#</a></h2><hr><p>The create a game component is arguably the most important component in the entire application. As simple as it seems, there would be no app without games! This being said, we as a team had many discussions about how we can minimize the amount of time and effort it takes for a user to complete this form. We also had to move away from the @vis.gl/react-google-maps API due to its lack of efficiency and use the react-places-autocomplete package. Its UI isn’t quite as appealing (which is always something we can change later on, but this is being discussed in production) but the usability is nearly the exact same as before.</p><p>The picture on the left shows the canva design of the very first model we had in mind for creating a game, and while I still love the dark design we had, it is the simplification in steps that is appreciated. Rather than 6 required steps (not even including the game type at this point in the design/implementation process), we now use four, and the use of the Google Places API is crucial in creating this change and simplification for the user!
<img alt="Screenshot 2024-04-22 at 9 47 09\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/2f6dc63f-26fd-404d-8481-8de09e6d136f>
<img alt="Screenshot 2024-04-22 at 9 47 32\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/5953d006-95f7-462c-b924-17266e6748a2></p><h3 id=map-view>Map View<a hidden class=anchor aria-hidden=true href=#map-view>#</a></h3><hr><p>As I was refactoring the code for the project, I realized that there may be a way to improve the user experience in an easy way — add a map to the UI. Without the map, everything looks a little too plain, and doesn’t fully attract the user to any one place in the UI, however, by adding the map to the UI, it allows both computer users and phone users of the product to easily find a game close to them visually rather than just from the card that is shown.</p><p>Knowing that we have already used the Dialog modal box in multiple other places, I thought it would be appropriate to make the map such that each point on it could be clicked, which would open the dialog box, with the same cards you can see in the list view of Find a Game!</p><p>As you can see below, when the user clicks the single game that exists on the map, it shows the same card from the list view! This is useful because it not only creates a more attractive experience than scrolling through (supposedly) hundreds of games to find the one you want, but also uses a feature that is familiar to the user and reusable and useful for our original goal with memory efficiency!</p><p><img alt="Screenshot 2024-04-22 at 9 48 06\u202fPM" loading=lazy src=https://github.com/Pmcslarrow/hoop-easy-material-ui/assets/74205136/782ad34b-bb90-47af-8222-937659998bc8></p><h3 id=deployment-and-last-touches>Deployment and Last Touches<a hidden class=anchor aria-hidden=true href=#deployment-and-last-touches>#</a></h3><hr><p>The final step after changing some of the little UI decisions and theming ideas is to deploy it. The first thing that I had to do was create a Dockerfile for the application that could take in arguments of environment variables passed down from Railway so that we could have secure variables.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-docker data-lang=docker><span class=line><span class=cl><span class=k>FROM</span><span class=s> node:18-alpine AS Production</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># Set default values for environment variables</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>NODE_ENV</span><span class=o>=</span>production
</span></span><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>REACT_APP_APIKEY</span><span class=o>=</span>default_value
</span></span><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>REACT_APP_APPID</span><span class=o>=</span>default_value
</span></span><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>REACT_APP_DOMAIN</span><span class=o>=</span>default_value
</span></span><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>REACT_APP_MEASUREMENT</span><span class=o>=</span>default_value
</span></span><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>REACT_APP_MSI</span><span class=o>=</span>default_value
</span></span><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>REACT_APP_PORT</span><span class=o>=</span>default_value
</span></span><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>REACT_APP_PROJECTID</span><span class=o>=</span>default_value
</span></span><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>REACT_APP_STORAGE</span><span class=o>=</span>default_value
</span></span><span class=line><span class=cl><span class=k>ENV</span> <span class=nv>REACT_APP_GOOGLE_API</span><span class=o>=</span>default_value
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>WORKDIR</span><span class=s> /app/src/hoop-easy-mui</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> package*.json ./<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> npm install<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> . .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># Replace default values with Railway shared variables</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> APIKEY<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> APPID<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> DOMAIN<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> MEASUREMENT<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> MSI<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> PORT<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> PROJECTID<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> STORAGE<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ARG</span> GOOGLE_API<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>REACT_APP_APIKEY</span><span class=o>=</span><span class=nv>$APIKEY</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>REACT_APP_APPID</span><span class=o>=</span><span class=nv>$APPID</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>REACT_APP_DOMAIN</span><span class=o>=</span><span class=nv>$DOMAIN</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>REACT_APP_MEASUREMENT</span><span class=o>=</span><span class=nv>$MEASUREMENT</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>REACT_APP_MSI</span><span class=o>=</span><span class=nv>$MSI</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>REACT_APP_PORT</span><span class=o>=</span><span class=nv>$PORT</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>REACT_APP_PROJECTID</span><span class=o>=</span><span class=nv>$PROJECTID</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>REACT_APP_STORAGE</span><span class=o>=</span><span class=nv>$STORAGE</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>REACT_APP_GOOGLE_API</span><span class=o>=</span><span class=nv>$GOOGLE_API</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> npm run build<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>CMD</span> <span class=p>[</span><span class=s2>&#34;npx&#34;</span><span class=p>,</span> <span class=s2>&#34;serve&#34;</span><span class=p>,</span> <span class=s2>&#34;-s&#34;</span><span class=p>,</span> <span class=s2>&#34;build&#34;</span><span class=p>]</span><span class=err>
</span></span></span></code></pre></div><p>While it took some playing around, I was able to figure out the correct settings to prevent any errors from ESLint seen in the application, and made sure that there were not environment variables that still existing for people to see.</p><p>Railway is a platform that helps simplify the process of deployment, and automatically detected my Dockerfile to help spin it up.</p><p>After successfully hosting the application through Railway, it was officially time to purchase a domain name — <a href=http://hoopeasy.org>hoopeasy.org</a> !!!!</p><p><em>No Longer Hosted</em></p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/react/>React</a></li><li><a href=http://localhost:1313/tags/javascript/>Javascript</a></li><li><a href=http://localhost:1313/tags/node.js/>Node.js</a></li><li><a href=http://localhost:1313/tags/docker/>Docker</a></li><li><a href=http://localhost:1313/tags/sql/>SQL</a></li><li><a href=http://localhost:1313/tags/railway/>Railway</a></li><li><a href=http://localhost:1313/tags/fullstack/>Fullstack</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>McSlarrowPortfolio</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>